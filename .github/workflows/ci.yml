name: CI - Instagram Bot

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  syntax-check:
    name: Python Syntax Check
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      
    - name: Set up Python 3.10
      uses: actions/setup-python@v4
      with:
        python-version: '3.10'
        
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        # Ù‡Ù…ÛŒØ´Ù‡ selenium Ø±Ùˆ Ù†ØµØ¨ Ú©Ù†
        pip install selenium>=4.10.0
        # Ø³Ø¹ÛŒ Ú©Ù† requirements.txt Ø±Ùˆ Ù¾ÛŒØ¯Ø§ Ú©Ù† Ùˆ Ù†ØµØ¨ Ú©Ù†
        if [ -f "requirements.txt" ]; then
          echo "ğŸ“¦ Installing from requirements.txt"
          pip install -r requirements.txt
        elif [ -f "requirement.txt" ]; then
          echo "ğŸ“¦ Installing from requirement.txt"
          pip install -r requirement.txt
        else
          echo "âš ï¸  No requirements file found, only selenium installed"
        fi
        
    - name: Check Python syntax
      run: |
        echo "ğŸ” Checking Python syntax..."
        # Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø§Ø³Ù… ÙØ§ÛŒÙ„ ÙˆØ§Ù‚Ø¹ÛŒ
        python -m py_compile get_folowers.py
        python -m py_compile send_direct.py  
        python -m py_compile report.py
        echo "âœ… All Python files compiled successfully!"

  structure-check:
    name: Project Structure Validation
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      
    - name: Validate project structure
      run: |
        echo "ğŸ“ Project Structure Check"
        echo "=========================="
        
        # ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø¶Ø±ÙˆØ±ÛŒ
        echo "Essential Files:"
        [ -f "README.md" ] && echo "âœ… README.md" || echo "âŒ README.md"
        [ -f "LICENSE" ] && echo "âœ… LICENSE" || echo "âŒ LICENSE" 
        [ -f ".gitignore" ] && echo "âœ… .gitignore" || echo "âŒ .gitignore"
        
        # ÙØ§ÛŒÙ„ requirements
        echo ""
        echo "Requirements Files:"
        [ -f "requirements.txt" ] && echo "âœ… requirements.txt" || echo "âŒ requirements.txt"
        [ -f "requirement.txt" ] && echo "âš ï¸  requirement.txt (typo?)" || echo "âœ… No duplicate file"
        
        # ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù¾Ø§ÛŒØªÙˆÙ†
        echo ""
        echo "Python Files:"
        [ -f "get_folowers.py" ] && echo "âœ… get_folowers.py" || echo "âŒ get_folowers.py"
        [ -f "send_direct.py" ] && echo "âœ… send_direct.py" || echo "âŒ send_direct.py"
        [ -f "report.py" ] && echo "âœ… report.py" || echo "âŒ report.py"
